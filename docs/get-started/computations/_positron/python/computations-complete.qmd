---
title: "Quarto Computations"
format: 
  html:
    code-fold: true
    code-tools: true
fig-height: 3
fig-width: 10
---

This dataset contains a subset of the fuel economy data from the EPA.

```{python}
#| label: load-packages

from plotnine import *
from plotnine.data import mpg
```

The plots in @fig-scatterplot show the relationship between city and highway mileage for 38 popular models of cars.
In @fig-scatterplot-1 the points are colored by the number of cylinders while in @fig-scatterplot the points are colored by engine displacement.

```{python}
#| label: fig-scatterplot
#| fig-cap: "City and highway mileage for 38 popular models of cars."
#| fig-subcap:
#|   - "Color by number of cylinders"
#|   - "Color by engine displacement, in liters"
#| layout-ncol: 2
#| column: page

cyl_plot = (
    ggplot(mpg, aes(x="hwy", y="cty", color="cyl"))
    + geom_point(alpha=0.5, size=2)
    + scale_color_continuous()
    + theme_bw()
)

cty_plot = (
    ggplot(mpg, aes(x="hwy", y="cty", color="displ"))
    + geom_point(alpha=0.5, size=2)
    + scale_color_continuous(cmap_name="cividis")
    + theme_bw()
)

cyl_plot.show()
cty_plot.show() 
```

There are `{python} len(mpg)` observations in our data.

```{python}
#| echo: false
mean_cty = round(mpg['cty'].mean(), 2)
mean_hwy = round(mpg['hwy'].mean(), 2)
```

The average city mileage of the cars in our data is `{python} f"{mean_cty:.2f}"` and the average highway mileage is `{python} f"{mean_hwy:.2f}"`. 